2025-04-26 20:20:17,623 - btr_data_collection - INFO - Running data collection immediately...
2025-04-26 20:20:17,623 - btr_data_collection - INFO - Starting data collection at 2025-04-26 20:20:17
2025-04-26 20:20:17,623 - btr_data_collection - INFO - Collecting Land Registry data...
2025-04-26 20:20:19,209 - btr_data_collection - INFO - Collecting ONS rental statistics...
2025-04-26 20:20:19,447 - btr_data_collection - INFO - Collecting planning applications data...
2025-04-26 20:20:24,154 - btr_data_collection - INFO - Collecting OpenStreetMap amenities data...
2025-04-26 20:20:29,347 - btr_data_collection - INFO - Collecting EPC ratings data...
2025-04-26 20:20:29,347 - btr_data_collection - INFO - No EPC API key found, using fallback bulk data method
2025-04-26 20:20:29,348 - btr_data_collection.epc - INFO - Fetching EPC ratings data...
2025-04-26 20:20:29,348 - btr_data_collection.epc - INFO - EPC API key not found. Using fallback bulk data method.
2025-04-26 20:20:29,348 - btr_data_collection.epc - INFO - Downloading bulk EPC data from https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/904503/D_EPC_National_Certificates_2020_Q2.zip
2025-04-26 20:20:29,526 - btr_data_collection.epc - ERROR - Error fetching EPC data: 404 Client Error: Not Found for url: https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/904503/D_EPC_National_Certificates_2020_Q2.zip
Traceback (most recent call last):
  File "/Users/ishanyash17/Documents/btr-investment-platform/scripts/fetch_epc_ratings.py", line 44, in fetch_epc_ratings
    response.raise_for_status()
  File "/Users/ishanyash17/Documents/btr-investment-platform/venv/lib/python3.8/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/904503/D_EPC_National_Certificates_2020_Q2.zip
2025-04-26 20:20:29,528 - btr_data_collection - INFO - Data collection completed successfully
2025-05-03 18:00:21,827 - btr_data_collection - INFO - Running data collection immediately...
2025-05-03 18:00:21,828 - btr_data_collection - INFO - Starting data collection at 2025-05-03 18:00:21
2025-05-03 18:00:21,828 - btr_data_collection - INFO - Collecting Land Registry data...
2025-05-03 18:00:25,362 - btr_data_collection - INFO - Collecting ONS rental statistics...
2025-05-03 18:00:25,578 - btr_data_collection - INFO - Collecting planning applications data...
2025-05-03 18:00:30,425 - btr_data_collection - INFO - Collecting OpenStreetMap amenities data...
2025-05-03 18:00:33,187 - btr_data_collection - INFO - Collecting EPC ratings data...
2025-05-03 18:00:33,187 - btr_data_collection - INFO - No EPC API key found, using fallback bulk data method
2025-05-03 18:00:33,188 - btr_data_collection.epc - INFO - Fetching EPC ratings data...
2025-05-03 18:00:33,188 - btr_data_collection.epc - INFO - EPC API key not found. Using fallback bulk data method.
2025-05-03 18:00:33,188 - btr_data_collection.epc - INFO - Downloading bulk EPC data from https://epc.opendatacommunities.org/api/v1/domestic/search?size=10000
2025-05-03 18:00:33,349 - btr_data_collection.epc - ERROR - Error fetching EPC data: 401 Client Error: Unauthorized for url: https://epc.opendatacommunities.org/api/v1/domestic/search?size=10000
Traceback (most recent call last):
  File "/Users/ishanyash17/Documents/btr-investment-platform/scripts/fetch_epc_ratings.py", line 46, in fetch_epc_ratings
    response.raise_for_status()
  File "/Users/ishanyash17/opt/anaconda3/lib/python3.8/site-packages/requests/models.py", line 943, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://epc.opendatacommunities.org/api/v1/domestic/search?size=10000
2025-05-03 18:00:33,354 - btr_data_collection - INFO - Data collection completed successfully
2025-05-03 18:33:58,396 - btr_data_collection - INFO - Running data collection immediately...
2025-05-03 18:33:58,396 - btr_data_collection - INFO - Starting data collection at 2025-05-03 18:33:58
2025-05-03 18:33:58,397 - btr_data_collection - INFO - Collecting Land Registry data...
2025-05-03 18:34:00,463 - root - INFO - Collecting ONS rental statistics...
2025-05-03 18:34:00,463 - root - INFO - Fetching ONS rental statistics...
2025-05-03 18:34:00,858 - root - ERROR - No rental datasets found
2025-05-03 18:34:00,858 - root - WARNING - Failed to collect ONS rental data
2025-05-03 18:34:00,858 - btr_data_collection - INFO - Collecting planning applications data...
2025-05-03 18:34:05,606 - btr_data_collection - INFO - Collecting OpenStreetMap amenities data...
2025-05-03 18:34:08,589 - btr_data_collection - INFO - Collecting EPC ratings data...
2025-05-03 18:34:08,589 - btr_data_collection - INFO - No EPC API key found, using fallback bulk data method
2025-05-03 18:34:08,589 - btr_data_collection.epc - INFO - Fetching EPC ratings data...
2025-05-03 18:34:08,589 - btr_data_collection.epc - INFO - EPC API key not found. Using fallback bulk data method.
2025-05-03 18:34:08,589 - btr_data_collection.epc - INFO - Downloading bulk EPC data from https://epc.opendatacommunities.org/api/v1/domestic/search?size=10000
2025-05-03 18:34:08,676 - btr_data_collection.epc - ERROR - Error fetching EPC data: 401 Client Error: Unauthorized for url: https://epc.opendatacommunities.org/api/v1/domestic/search?size=10000
Traceback (most recent call last):
  File "/Users/ishanyash17/Documents/btr-investment-platform/scripts/fetch_epc_ratings.py", line 46, in fetch_epc_ratings
    response.raise_for_status()
  File "/Users/ishanyash17/opt/anaconda3/lib/python3.8/site-packages/requests/models.py", line 943, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://epc.opendatacommunities.org/api/v1/domestic/search?size=10000
2025-05-03 18:34:08,679 - btr_data_collection - INFO - Data collection completed successfully
2025-05-03 18:42:52,467 - btr_data_collection - INFO - Running data collection immediately...
2025-05-03 18:42:52,468 - btr_data_collection - INFO - Starting data collection at 2025-05-03 18:42:52
2025-05-03 18:42:52,468 - btr_data_collection - INFO - Collecting Land Registry data...
2025-05-03 18:42:54,070 - btr_data_collection - INFO - Collecting ONS rental statistics...
2025-05-03 18:42:54,070 - root - INFO - Fetching ONS rental statistics...
2025-05-03 18:42:54,070 - root - INFO - Trying dataset ID: private-rental-market-summary-statistics
2025-05-03 18:42:54,304 - root - WARNING - Dataset private-rental-market-summary-statistics not found: 404
2025-05-03 18:42:54,304 - root - INFO - Trying dataset ID: index-of-private-housing-rental-prices
2025-05-03 18:42:54,466 - root - WARNING - Dataset index-of-private-housing-rental-prices not found: 404
2025-05-03 18:42:54,467 - root - INFO - Trying dataset ID: rental-prices
2025-05-03 18:42:54,660 - root - WARNING - Dataset rental-prices not found: 404
2025-05-03 18:42:54,661 - root - INFO - Trying dataset ID: rpi-housing-rent
2025-05-03 18:42:54,924 - root - WARNING - Dataset rpi-housing-rent not found: 404
2025-05-03 18:42:54,924 - root - INFO - Trying dataset ID: cpih-housing-actual-rentals
2025-05-03 18:42:55,085 - root - WARNING - Dataset cpih-housing-actual-rentals not found: 404
2025-05-03 18:42:55,085 - root - ERROR - No rental datasets could be downloaded
2025-05-03 18:42:55,085 - btr_data_collection - WARNING - Failed to collect ONS rental data
2025-05-03 18:42:55,085 - btr_data_collection - INFO - Collecting planning applications data...
2025-05-03 18:42:55,085 - root - INFO - Fetching planning applications...
2025-05-03 18:42:55,086 - root - INFO - Fetching planning applications for manchester...
2025-05-03 18:42:55,372 - root - WARNING - Error fetching planning data for manchester: 500
2025-05-03 18:42:55,372 - root - INFO - Fetching planning applications for birmingham...
2025-05-03 18:42:55,602 - root - WARNING - Error fetching planning data for birmingham: 500
2025-05-03 18:42:55,604 - root - INFO - Fetching planning applications for london...
2025-05-03 18:42:55,881 - root - WARNING - Error fetching planning data for london: 500
2025-05-03 18:42:55,883 - root - WARNING - No planning applications found across all areas
2025-05-03 18:42:55,885 - btr_data_collection - ERROR - Error during data collection: name 'pd' is not defined
Traceback (most recent call last):
  File "scripts/run_data_collection.py", line 63, in collect_all_data
    if isinstance(planning_data, pd.DataFrame) and not planning_data.empty:
NameError: name 'pd' is not defined
2025-05-03 18:43:11,941 - btr_data_collection - INFO - Running data collection immediately...
2025-05-03 18:43:11,941 - btr_data_collection - INFO - Starting data collection at 2025-05-03 18:43:11
2025-05-03 18:43:11,942 - btr_data_collection - INFO - Collecting Land Registry data...
2025-05-03 18:43:13,600 - btr_data_collection - INFO - Collecting ONS rental statistics...
2025-05-03 18:43:13,600 - root - INFO - Fetching ONS rental statistics...
2025-05-03 18:43:13,600 - root - INFO - Trying dataset ID: private-rental-market-summary-statistics
2025-05-03 18:43:13,753 - root - WARNING - Dataset private-rental-market-summary-statistics not found: 404
2025-05-03 18:43:13,753 - root - INFO - Trying dataset ID: index-of-private-housing-rental-prices
2025-05-03 18:43:13,887 - root - WARNING - Dataset index-of-private-housing-rental-prices not found: 404
2025-05-03 18:43:13,887 - root - INFO - Trying dataset ID: rental-prices
2025-05-03 18:43:14,024 - root - WARNING - Dataset rental-prices not found: 404
2025-05-03 18:43:14,025 - root - INFO - Trying dataset ID: rpi-housing-rent
2025-05-03 18:43:14,167 - root - WARNING - Dataset rpi-housing-rent not found: 404
2025-05-03 18:43:14,168 - root - INFO - Trying dataset ID: cpih-housing-actual-rentals
2025-05-03 18:43:14,357 - root - WARNING - Dataset cpih-housing-actual-rentals not found: 404
2025-05-03 18:43:14,357 - root - ERROR - No rental datasets could be downloaded
2025-05-03 18:43:14,357 - btr_data_collection - WARNING - Failed to collect ONS rental data
2025-05-03 18:43:14,357 - btr_data_collection - INFO - Collecting planning applications data...
2025-05-03 18:43:14,357 - root - INFO - Fetching planning applications...
2025-05-03 18:43:14,357 - root - INFO - Fetching planning applications for manchester...
2025-05-03 18:43:14,635 - root - WARNING - Error fetching planning data for manchester: 500
2025-05-03 18:43:14,635 - root - INFO - Fetching planning applications for birmingham...
2025-05-03 18:43:14,902 - root - WARNING - Error fetching planning data for birmingham: 500
2025-05-03 18:43:14,902 - root - INFO - Fetching planning applications for london...
2025-05-03 18:43:15,155 - root - WARNING - Error fetching planning data for london: 500
2025-05-03 18:43:15,155 - root - WARNING - No planning applications found across all areas
2025-05-03 18:43:15,155 - btr_data_collection - WARNING - No planning applications found or errors occurred
2025-05-03 18:43:15,155 - btr_data_collection - INFO - Collecting OpenStreetMap amenities data...
2025-05-03 18:43:17,772 - btr_data_collection - INFO - Collecting EPC ratings data...
2025-05-03 18:43:17,773 - btr_data_collection - INFO - Using provided EPC API credentials
2025-05-03 18:43:17,773 - root - INFO - Fetching EPC ratings data...
2025-05-03 18:43:17,891 - root - INFO - EPC API key verification successful
2025-05-03 18:43:22,522 - root - INFO - Saved 5000 EPC records to data/raw/epc_data_20250503.csv
2025-05-03 18:43:22,527 - btr_data_collection - INFO - Successfully collected 5000 EPC records
2025-05-03 18:43:22,527 - btr_data_collection - INFO - Data collection completed successfully
2025-05-03 18:55:26,786 - btr_data_collection - INFO - Running data collection immediately...
2025-05-03 18:55:26,787 - btr_data_collection - INFO - Starting data collection at 2025-05-03 18:55:26
2025-05-03 18:55:26,788 - btr_data_collection - INFO - Collecting Land Registry data...
2025-05-03 18:55:28,354 - btr_data_collection - INFO - Collecting ONS rental statistics...
2025-05-03 18:55:28,355 - root - INFO - Fetching ONS rental statistics...
2025-05-03 18:55:28,573 - root - INFO - Found 20 total datasets, searching for rental-related ones...
2025-05-03 18:55:28,573 - root - ERROR - No rental-related datasets found
2025-05-03 18:55:28,573 - btr_data_collection - WARNING - Failed to collect ONS rental data
2025-05-03 18:55:28,573 - btr_data_collection - INFO - Collecting planning applications data...
2025-05-03 18:55:28,574 - root - INFO - Fetching planning applications...
2025-05-03 18:55:28,574 - root - INFO - Fetching planning applications for manchester...
2025-05-03 18:55:28,699 - root - WARNING - No planning applications found for manchester
2025-05-03 18:55:28,700 - root - INFO - Fetching planning applications for birmingham...
2025-05-03 18:55:28,826 - root - WARNING - No planning applications found for birmingham
2025-05-03 18:55:28,827 - root - INFO - Fetching planning applications for london_camden...
2025-05-03 18:55:28,963 - root - WARNING - No planning applications found for london_camden
2025-05-03 18:55:28,964 - root - INFO - Fetching planning applications for london_westminster...
2025-05-03 18:55:29,094 - root - WARNING - No planning applications found for london_westminster
2025-05-03 18:55:29,094 - root - WARNING - No planning applications found across all areas
2025-05-03 18:55:29,094 - btr_data_collection - WARNING - No planning applications found or errors occurred
2025-05-03 18:55:29,094 - btr_data_collection - INFO - Collecting OpenStreetMap amenities data...
2025-05-03 18:55:33,709 - btr_data_collection - INFO - Collecting EPC ratings data...
2025-05-03 18:55:33,710 - btr_data_collection - INFO - Using provided EPC API credentials
2025-05-03 18:55:33,710 - root - INFO - Fetching EPC ratings data...
2025-05-03 18:55:33,907 - root - INFO - EPC API key verification successful
2025-05-03 18:55:38,058 - root - INFO - Saved 5000 EPC records to data/raw/epc_data_20250503.csv
2025-05-03 18:55:38,063 - btr_data_collection - INFO - Successfully collected 5000 EPC records
2025-05-03 18:55:38,063 - btr_data_collection - INFO - Data collection completed successfully
2025-05-03 19:03:58,996 - btr_data_collection - INFO - Running data collection immediately...
2025-05-03 19:03:58,997 - btr_data_collection - INFO - Starting data collection at 2025-05-03 19:03:58
2025-05-03 19:03:58,997 - btr_data_collection - INFO - Collecting Land Registry data...
2025-05-03 19:04:02,514 - btr_data_collection - INFO - Collecting ONS rental statistics...
2025-05-03 19:04:02,514 - root - INFO - Fetching ONS rental statistics...
2025-05-03 19:04:02,515 - root - INFO - Trying to fetch dataset: private-rental-market-summary-statistics
2025-05-03 19:04:02,683 - root - INFO - Trying to fetch dataset: index-of-private-housing-rental-prices
2025-05-03 19:04:02,889 - root - INFO - Trying to fetch dataset: rental-prices
2025-05-03 19:04:03,053 - root - INFO - Trying to fetch dataset: indexofprivatehousingrentalprices
2025-05-03 19:04:03,229 - root - INFO - Trying to fetch dataset: iphrp
2025-05-03 19:04:03,381 - root - INFO - Trying to fetch dataset: rpi-housing-rent
2025-05-03 19:04:03,549 - root - INFO - API approach failed, trying direct URL access
2025-05-03 19:04:03,550 - root - INFO - Trying direct URL: https://www.ons.gov.uk/economy/inflationandpriceindices/datasets/indexofprivatehousingrentalpricesreferencetables
2025-05-03 19:04:03,730 - root - INFO - Successfully accessed dataset via direct URL: indexofprivatehousingrentalpricesreferencetables
2025-05-03 19:04:03,731 - root - INFO - Trying direct URL: https://www.ons.gov.uk/peoplepopulationandcommunity/housing/datasets/privaterentalmarketsummarystatisticsinengland
2025-05-03 19:04:03,900 - root - INFO - Successfully accessed dataset via direct URL: privaterentalmarketsummarystatisticsinengland
2025-05-03 19:04:03,901 - root - INFO - Successfully retrieved 2 rental datasets
2025-05-03 19:04:03,901 - btr_data_collection - INFO - Successfully collected 2 ONS rental datasets
2025-05-03 19:04:03,901 - btr_data_collection - INFO - Retrieved dataset: Indexofprivatehousingrentalpricesreferencetables saved to data/raw/ons_rental_indexofprivatehousingrentalpricesreferencetables_20250503.html
2025-05-03 19:04:03,902 - btr_data_collection - INFO - Retrieved dataset: Privaterentalmarketsummarystatisticsinengland saved to data/raw/ons_rental_privaterentalmarketsummarystatisticsinengland_20250503.html
2025-05-03 19:04:03,902 - btr_data_collection - INFO - Collecting planning applications data...
2025-05-03 19:04:03,902 - root - INFO - Fetching planning applications...
2025-05-03 19:04:03,902 - root - INFO - Fetching planning applications for manchester...
2025-05-03 19:04:04,008 - root - WARNING - No planning applications found for manchester
2025-05-03 19:04:04,008 - root - INFO - Fetching planning applications for birmingham...
2025-05-03 19:04:04,126 - root - WARNING - No planning applications found for birmingham
2025-05-03 19:04:04,127 - root - INFO - Fetching planning applications for london_camden...
2025-05-03 19:04:04,242 - root - WARNING - No planning applications found for london_camden
2025-05-03 19:04:04,242 - root - INFO - Fetching planning applications for london_westminster...
2025-05-03 19:04:04,363 - root - WARNING - No planning applications found for london_westminster
2025-05-03 19:04:04,363 - root - WARNING - No planning applications found across all areas
2025-05-03 19:04:04,363 - btr_data_collection - WARNING - No planning applications found or errors occurred
2025-05-03 19:04:04,363 - btr_data_collection - INFO - Collecting OpenStreetMap amenities data...
2025-05-03 19:04:07,251 - btr_data_collection - INFO - Collecting EPC ratings data...
2025-05-03 19:04:07,252 - btr_data_collection - INFO - Using provided EPC API credentials
2025-05-03 19:04:07,252 - root - INFO - Fetching EPC ratings data...
2025-05-03 19:04:07,365 - root - INFO - EPC API key verification successful
2025-05-03 19:04:11,392 - root - INFO - Saved 5000 EPC records to data/raw/epc_data_20250503.csv
2025-05-03 19:04:11,397 - btr_data_collection - INFO - Successfully collected 5000 EPC records
2025-05-03 19:04:11,398 - btr_data_collection - INFO - Data collection completed successfully
